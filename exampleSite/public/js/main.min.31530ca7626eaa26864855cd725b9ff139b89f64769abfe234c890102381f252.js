document.addEventListener("DOMContentLoaded",function(){initWindowControls(),initRetroEffects(),initKeyboardNavigation(),initImageGalleries(),initCodeCopy(),initSearch(),initThemePersistence()});function initWindowControls(){document.querySelectorAll(".window-button").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const n=this.textContent,t=this.closest(".window");switch(this.style.border="1px inset var(--button-face)",setTimeout(()=>{this.style.border="1px outset var(--button-face)"},100),n){case"_":toggleWindowMinimize(t);break;case"□":toggleWindowMaximize(t);break;case"×":showCloseDialog(t);break}})})}function toggleWindowMinimize(e){const t=e.querySelector(".window-content");t.style.display==="none"?(t.style.display="block",e.style.height="auto"):(t.style.display="none",e.style.height="auto")}function toggleWindowMaximize(e){e.classList.contains("maximized")?(e.classList.remove("maximized"),e.style.position="static",e.style.top="auto",e.style.left="auto",e.style.width="auto",e.style.height="auto",e.style.zIndex="auto"):(e.classList.add("maximized"),e.style.position="fixed",e.style.top="10px",e.style.left="10px",e.style.width="calc(100vw - 20px)",e.style.height="calc(100vh - 40px)",e.style.zIndex="1000")}function showCloseDialog(e){const t=confirm(`Close this window?

This is just for show - the window will reappear when you refresh the page! 😉`);t&&(e.style.animation="fadeOut 0.3s ease-out",setTimeout(()=>{e.style.display="none"},300))}function initRetroEffects(){const e=["Loading... Please wait...","System is Y2K compliant!","Best viewed in 1024x768","Optimized for Internet Explorer 6.0","This site uses cutting-edge JavaScript!","Now with 256 colors!","Geocities approved!","Web 1.0 Forever!"],t=document.querySelector(".status-bar .status-left");if(t&&Math.random()>.7){const s=e[Math.floor(Math.random()*e.length)],n=document.createElement("span");n.className="status-item",n.textContent=s,t.appendChild(n)}localStorage.getItem("retroCursor")==="true"&&initCursorTrail(),initKonamiCode()}function initCursorTrail(){let e=[];document.addEventListener("mousemove",function(t){e.push({x:t.clientX,y:t.clientY,time:Date.now()}),e=e.filter(e=>Date.now()-e.time<500),e.forEach((e,t)=>{if(t%3===0){const t=document.createElement("div");t.style.position="fixed",t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width="3px",t.style.height="3px",t.style.backgroundColor="#00ffff",t.style.borderRadius="50%",t.style.pointerEvents="none",t.style.zIndex="9999",t.style.opacity=(500-(Date.now()-e.time))/500,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},500)}})})}function initKonamiCode(){const t=[38,38,40,40,37,39,37,39,66,65];let e=0;document.addEventListener("keydown",function(n){n.keyCode===t[e]?(e++,e===t.length&&(activateRetroMode(),e=0)):e=0})}function activateRetroMode(){alert(`🎉 RETRO MODE ACTIVATED! 🎉

Cursor trail enabled!
Extra retro effects unlocked!`),localStorage.setItem("retroCursor","true"),document.body.style.background="linear-gradient(45deg, #ff00ff, #00ffff, #ffff00, #ff00ff)",document.body.style.backgroundSize="400% 400%",document.body.style.animation="retroBackground 3s ease infinite";const e=document.createElement("style");e.textContent=`
        @keyframes retroBackground {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.8); }
        }
    `,document.head.appendChild(e),initCursorTrail()}function initKeyboardNavigation(){document.addEventListener("keydown",function(e){e.altKey&&e.key==="h"&&(e.preventDefault(),window.location.href="/"),e.altKey&&e.key==="p"&&(e.preventDefault(),window.location.href="/posts/"),e.key==="Escape"&&document.querySelectorAll(".window .window-content").forEach(e=>{e.style.display!=="none"&&(e.style.display="none")}),e.key==="F11"&&(e.preventDefault(),alert("F11 detected! If this were a real 90s browser, you'd now be in fullscreen mode! 📺"))})}function initImageGalleries(){document.querySelectorAll(".image-gallery img").forEach(e=>{e.addEventListener("click",function(){openLightbox(this)}),e.addEventListener("load",function(){this.style.opacity="0",this.style.transition="opacity 0.5s ease",setTimeout(()=>{this.style.opacity="1"},100)})})}function openLightbox(e){const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.zIndex="10000",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.cursor="pointer";const n=document.createElement("img");n.src=e.src,n.alt=e.alt,n.style.maxWidth="90%",n.style.maxHeight="90%",n.style.border="2px outset var(--border-dark)",t.appendChild(n),document.body.appendChild(t),t.addEventListener("click",function(){document.body.removeChild(t)});const s=function(e){e.key==="Escape"&&(document.body.removeChild(t),document.removeEventListener("keydown",s))};document.addEventListener("keydown",s)}function initCodeCopy(){document.querySelectorAll("pre code").forEach(e=>{const n=e.parentElement,t=document.createElement("button");t.textContent="📋 Copy",t.className="btn",t.style.position="absolute",t.style.top="4px",t.style.right="4px",t.style.fontSize="8px",t.style.padding="2px 4px",n.style.position="relative",n.appendChild(t),t.addEventListener("click",function(){navigator.clipboard.writeText(e.textContent).then(()=>{t.textContent="✅ Copied!",setTimeout(()=>{t.textContent="📋 Copy"},2e3)}).catch(()=>{const n=document.createElement("textarea");n.value=e.textContent,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),t.textContent="✅ Copied!",setTimeout(()=>{t.textContent="📋 Copy"},2e3)})})})}function initSearch(){const e=document.getElementById("search-input");e&&e.addEventListener("input",function(){const e=this.value.toLowerCase(),t=document.querySelectorAll(".post-list-item");t.forEach(t=>{const s=t.querySelector(".post-list-title a").textContent.toLowerCase(),n=t.querySelector(".post-list-summary"),o=n?n.textContent.toLowerCase():"";s.includes(e)||o.includes(e)?t.style.display="block":t.style.display="none"})})}function initThemePersistence(){window.addEventListener("beforeunload",function(){localStorage.setItem("scrollPosition",window.scrollY)});const e=localStorage.getItem("scrollPosition");e&&(window.scrollTo(0,parseInt(e)),localStorage.removeItem("scrollPosition")),document.querySelectorAll(".window").forEach((e,t)=>{const s=localStorage.getItem(`window-${t}-minimized`);if(s==="true"){const t=e.querySelector(".window-content");t&&(t.style.display="none")}const n=e.querySelector(".window-button");n&&n.textContent==="_"&&n.addEventListener("click",function(){setTimeout(()=>{const n=e.querySelector(".window-content"),s=n.style.display==="none";localStorage.setItem(`window-${t}-minimized`,s)},200)})})}function playRetroSound(e){const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),s=t.createGain();switch(n.connect(s),s.connect(t.destination),e){case"click":n.frequency.setValueAtTime(800,t.currentTime),n.frequency.exponentialRampToValueAtTime(400,t.currentTime+.1);break;case"error":n.frequency.setValueAtTime(200,t.currentTime),n.frequency.exponentialRampToValueAtTime(100,t.currentTime+.3);break;case"success":n.frequency.setValueAtTime(400,t.currentTime),n.frequency.exponentialRampToValueAtTime(800,t.currentTime+.2);break}s.gain.setValueAtTime(.1,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),n.start(t.currentTime),n.stop(t.currentTime+.3)}window.VintageTheme={playRetroSound,activateRetroMode,openLightbox},console.log("🖥️ Vintage Web Theme loaded! Press ↑↑↓↓←→←→BA for a surprise! 🎮")